(function(t){function e(e){for(var s,r,n=e[0],l=e[1],d=e[2],u=0,p=[];u<n.length;u++)r=n[u],o[r]&&p.push(o[r][0]),o[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},o={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],r=a("2877"),n={},l=Object(r["a"])(n,o,i,!1,null,null,null),d=l.exports,c=a("8c4f"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"auth-page"},[a("div",{staticClass:"auth-header"},[t._v("Personal Planner")]),a("div",{staticClass:"auth-wrapper"},[a("div",{staticClass:"auth"},[a("div",{attrs:{id:"auth-header"}},[a("span",{class:{active:!t.login},on:{click:function(e){t.login=!1}}},[t._v("Login")]),a("span",{class:{active:t.login},on:{click:function(e){t.login=!0}}},[t._v("Register")])]),t.login?t.login?a("register",{on:{toLogin:function(e){t.login=!1}}}):t._e():a("login",{on:{toRegister:function(e){t.login=!0}}})],1)])])])},p=[],m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-block animated fadeIn"},[a("div",{staticClass:"auth-block__title"},[t._v(t._s(t.title))]),a("form",{staticClass:"form-slim",on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"email"}},[t._v("Email")]),a("fa",{attrs:{icon:"envelope"}}),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",class:{"input-error":t.errors.has("email")},attrs:{type:"text",name:"email",placeholder:"Input Email..."},domProps:{value:t.email},on:{blur:function(e){return t.labelHide("email")},focus:function(e){return t.labelShow("email")},input:function(e){e.target.composing||(t.email=e.target.value)}}})],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("email")))]),t.resetPasswordMenu?t._e():a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"password"}},[t._v("Password")]),a("fa",{attrs:{icon:"key"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"input",class:{"input-error":t.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Input password..."},domProps:{value:t.password},on:{blur:function(e){return t.labelHide("password")},focus:function(e){return t.labelShow("password")},input:function(e){e.target.composing||(t.password=e.target.value)}}})],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("password")))]),t.resetPasswordMenu?t._e():a("div",{staticClass:"flex align-center space-between"},[a("label",{staticClass:"input-rememberme"},[t._v("Remember me\n                "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rememberme,expression:"rememberme"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.rememberme)?t._i(t.rememberme,null)>-1:t.rememberme},on:{change:function(e){var a=t.rememberme,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.rememberme=a.concat([i])):r>-1&&(t.rememberme=a.slice(0,r).concat(a.slice(r+1)))}else t.rememberme=o}}}),a("span")]),a("div",{staticClass:"link",on:{click:function(e){t.resetPasswordMenu=!0}}},[t._v("Forgot your password?")])]),t.error?a("div",{staticClass:"error"},[t._v(t._s(t.error))]):t.success?a("div",{staticClass:"success"},[t._v(t._s(t.success))]):t._e(),a("div",{staticClass:"form-controls relative"},[t.resetPasswordMenu?t.resetPasswordMenu?a("button",{staticClass:"btn cus-green wide",staticStyle:{margin:"0"},attrs:{disabled:!t.email||t.loading},on:{click:function(e){return e.preventDefault(),t.resetPassword(e)}}},[t.loading?t._e():a("span",[t._v("Reset")]),t.loading?a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")]):t._e()]):t._e():a("button",{staticClass:"btn cus-green wide",staticStyle:{margin:"0"},attrs:{type:"submit",disabled:t.loading}},[t.loading?t._e():a("span",[t._v("Login")]),t.loading?a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")]):t._e()])])]),t.resetPasswordMenu?t._e():a("div",{staticClass:"link centered",on:{click:t.goToRegister}},[t._v("Not registered yet?")]),t.resetPasswordMenu?a("div",{staticClass:"link centered",on:{click:function(e){t.resetPasswordMenu=!1}}},[t._v("Go back")]):t._e(),t._m(0)])},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"todos-footer"}},[a("div",[a("span",[t._v("Personal Planner by Asset Sultanov")])]),a("p",[t._v("© 2019")])])}],f={name:"login",data:function(){return{email:"",password:"",error:"",success:"",loading:!1,rememberme:!1,resetPasswordMenu:!1}},computed:{title:function(){return this.resetPasswordMenu?"Reset password":"Login"}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.login():t.error="Fill in the correct data, please"})},login:function(){var t=this;this.loading=!0;var e={email:this.email,password:this.password,rememberme:this.rememberme};this.$http.post("/signin",e,{timeout:5e3}).then(function(e){t.$store.dispatch("setSession",e.data),t.$router.push("/main")}).catch(function(e){console.log(e),"ECONNABORTED"===e.code?t.error="SERVER NOT RESPONSE":401==e.response.status?t.error="WRONG LOGIN OR PASSWORD":t.error="SERVER ERROR",setTimeout(function(){t.error=""},4e3)}).then(function(){t.loading=!1})},resetPassword:function(){var t=this;this.loading=!0,this.$http.get("/resetPassword?email=".concat(this.email)).then(function(e){console.log(e.data),t.success="Password restored! Check your email!"}).catch(function(e){console.log(e),406==e.response.status?(t.error="Wrong Email address",setTimeout(function(){t.error=""},4e3)):(t.error="Server error",setTimeout(function(){t.error=""},4e3))}).then(function(){return t.loading=!1})},labelShow:function(t){document.getElementById(t).style.opacity="1"},labelHide:function(t){document.getElementById(t).style.opacity="0"},goToRegister:function(){this.$emit("toRegister")}}},v=f,g=Object(r["a"])(v,m,h,!1,null,null,null),C=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-block animated fadeIn"},[a("div",{staticClass:"auth-block__title"},[t._v("Registration")]),a("form",{staticClass:"form-slim",on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"firstname"}},[t._v("Firstname* (letters only)")]),a("fa",{attrs:{icon:"user"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"},{name:"validate",rawName:"v-validate",value:"required|alpha",expression:"'required|alpha'"}],staticClass:"input",class:{"input-error":t.errors.has("firstname")},attrs:{type:"text",name:"firstname",autocomplete:"off",placeholder:"Input firstname"},domProps:{value:t.firstname},on:{focus:function(e){return t.labelShow("firstname")},blur:function(e){return t.labelHide("firstname")},input:function(e){e.target.composing||(t.firstname=e.target.value)}}})],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("firstname")))]),a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"lastname"}},[t._v("Lastname* (letters only)")]),a("fa",{attrs:{icon:"user"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"},{name:"validate",rawName:"v-validate",value:"required|alpha",expression:"'required|alpha'"}],staticClass:"input",class:{"input-error":t.errors.has("lastname")},attrs:{type:"text",name:"lastname",autocomplete:"off",placeholder:"Input lastname..."},domProps:{value:t.lastname},on:{focus:function(e){return t.labelShow("lastname")},blur:function(e){return t.labelHide("lastname")},input:function(e){e.target.composing||(t.lastname=e.target.value)}}})],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("lastname")))]),a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"email-register"}},[t._v("Email* (not forget about '@' sign and domain zone)")]),a("fa",{attrs:{icon:"envelope"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"input",class:{"input-error":t.errors.has("email")},attrs:{type:"text",name:"email",autocomplete:"off",placeholder:"Input Email..."},domProps:{value:t.email},on:{focus:function(e){return t.labelShow("email-register")},blur:function(e){return t.labelHide("email-register")},input:function(e){e.target.composing||(t.email=e.target.value)}}})],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("email")))]),a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"password-register"}},[t._v("Password* (min 4 characters)")]),a("fa",{attrs:{icon:"key"}}),a("div",{staticClass:"relative"},["checkbox"===t.passwordType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],staticClass:"input",class:{"input-error":t.errors.has("password")},attrs:{name:"password",autocomplete:"off",placeholder:"Create a password...",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{focus:function(e){return t.labelShow("password-register")},blur:function(e){return t.labelHide("password-register")},change:function(e){var a=t.password,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.password=a.concat([i])):r>-1&&(t.password=a.slice(0,r).concat(a.slice(r+1)))}else t.password=o}}}):"radio"===t.passwordType?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],staticClass:"input",class:{"input-error":t.errors.has("password")},attrs:{name:"password",autocomplete:"off",placeholder:"Create a password...",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{focus:function(e){return t.labelShow("password-register")},blur:function(e){return t.labelHide("password-register")},change:function(e){t.password=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:4",expression:"'required|min:4'"}],staticClass:"input",class:{"input-error":t.errors.has("password")},attrs:{name:"password",autocomplete:"off",placeholder:"Create a password...",type:t.passwordType},domProps:{value:t.password},on:{focus:function(e){return t.labelShow("password-register")},blur:function(e){return t.labelHide("password-register")},input:function(e){e.target.composing||(t.password=e.target.value)}}})])],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("password")))]),t.error?a("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t.success?a("div",{staticClass:"success"},[t._v(t._s(t.success))]):t._e(),a("div",{staticClass:"form-controls relative"},[a("button",{staticClass:"btn cus-green wide ",attrs:{type:"submit",disabled:t.loading}},[t.loading?t._e():a("span",[t._v("Register")]),t.loading?a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")]):t._e()])])]),a("div",{staticClass:"link centered",on:{click:t.goToLogin}},[t._v("Already registered?")])])},w=[],_={name:"register",data:function(){return{firstname:"",lastname:"",email:"",password:"",passwordType:"password",loading:!1,error:"",success:""}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.register():t.error="Fill in the correct data, please"})},register:function(){var t=this;this.loading=!0;var e={firstname:this.firstname,lastname:this.lastname,email:this.email,password:this.password};this.$http.post("/register",e).then(function(e){t.success=e.data,t.error=""}).catch(function(e){console.log(e),406==e.response.status&&(t.error=e.response.data)}).then(function(){t.loading=!1})},passwordVisible:function(){"password"===this.passwordType?this.passwordType="text":this.passwordType="password"},labelShow:function(t){document.getElementById(t).style.opacity="1"},labelHide:function(t){document.getElementById(t).style.opacity="0"},goToLogin:function(){this.$emit("toLogin")}}},k=_,y=Object(r["a"])(k,b,w,!1,null,null,null),E=y.exports,A={name:"auth",components:{Login:C,Register:E},data:function(){return{login:!1}},computed:{loggedIn:function(){return this.$store.getters.loggedIn}}},I=A,T=Object(r["a"])(I,u,p,!1,null,null,null),P=T.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main"}},[a("app-header"),a("todo")],1)},x=[],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"todo"},[a("todo-search",{attrs:{anyRemaining:t.anyRemaining},on:{checkAllChanged:t.checkAllTodos}}),a("div",{staticClass:"todo-content"},[t.error&&!t.loading&&0==t.todos.length?a("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),t.error&&t.loading&&0==t.todos.length?a("div",{staticClass:"form-controls relative"},[t._m(0)]):t._e(),t.error&&!t.loading&&0==t.todos.length?a("div",{staticClass:"form-controls"},[a("i",{staticClass:"icon dark",attrs:{title:"Refresh"},on:{click:function(e){return t.getTodos()}}},[a("fa",{attrs:{icon:"sync-alt"}})],1)]):t._e(),a("draggable",{attrs:{options:{animation:200,handle:".todo-item-grab"}},on:{start:function(e){t.drag=!0},update:t.setOrder,end:function(e){t.drag=!1}},model:{value:t.todosFiltered,callback:function(e){t.todosFiltered=e},expression:"todosFiltered"}},t._l(t.todosFiltered,function(e,s){return a("item",{key:e._id,attrs:{todo:e,index:s,chosenTodoId:t.chosenTodoId,checkAll:!t.anyRemaining},on:{unchosen:t.unchooseTodo,setUnsetCompleted:t.setUnsetCompleted,setUnsetImportant:t.setUnsetImportant,removedTodo:t.removeTodo,finishedEdit:t.finishedEdit}})}),1)],1),a("total",{attrs:{anyRemaining:t.anyRemaining,remaining:t.remaining,isCompletedExists:t.isCompletedExists,filter:t.filter},on:{filtered:t.setFilter,deleteAllCompleted:t.deleteCompleted,checkAllChanged:t.checkAllTodos}}),t.authError?a("div",{staticClass:"backdrop"},[a("div",{staticClass:"backdrop-inner"},[a("div",{staticClass:"error"},[t._v(t._s(t.authError))]),a("div",{staticClass:"form-controls"},[a("button",{staticClass:"btn primary",on:{click:function(e){return t.navigateTo("/")}}},[t._v("Login")])])])]):t._e(),t.todoDetails?a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"backdrop",on:{click:function(e){t.todoDetails=!1}}}),a("todo-details",{staticClass:"animated fadeInDown fast",attrs:{todo:t.todoDetail}})],1):t._e(),t.loading?a("div",{staticClass:"preloader"},[a("div",{staticClass:"animation animation-rotating-square"})]):t._e()],1)},M=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lds-facebook"},[a("div",{staticStyle:{background:"#527a7a"}}),a("div",{staticStyle:{background:"#527a7a"}}),a("div",{staticStyle:{background:"#527a7a"}})])}],$=(a("ac6a"),a("20d6"),a("55dd"),a("6762"),a("2fdb"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"todo-item",class:{chosen:t.chosenTodoId===t.todo._id}},[a("div",{staticClass:"todo-item-inner"},[a("div",{staticClass:"todo-item-left"},[a("label",{staticClass:"input-checkbox tooltip is-tooltip-right",attrs:{"data-tooltip":"Mark as done"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.completed,expression:"completed"}],attrs:{id:t.todo._id,type:"checkbox"},domProps:{checked:Array.isArray(t.completed)?t._i(t.completed,null)>-1:t.completed},on:{change:[function(e){var a=t.completed,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.completed=a.concat([i])):r>-1&&(t.completed=a.slice(0,r).concat(a.slice(r+1)))}else t.completed=o},t.setUnsetCompleted]}}),a("label",{attrs:{for:t.todo._id}})]),a("label",{staticClass:"input-checkbox-flag tooltip is-tooltip-right",attrs:{"data-tooltip":"Mark as important"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.important,expression:"important"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.important)?t._i(t.important,null)>-1:t.important},on:{change:[function(e){var a=t.important,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.important=a.concat([i])):r>-1&&(t.important=a.slice(0,r).concat(a.slice(r+1)))}else t.important=o},t.setUnsetImportant]}}),a("fa",{staticClass:"icon-sm",class:{red:t.important},attrs:{icon:"flag"}})],1),a("i",{staticClass:"todo-date"},[t._v("EffDate: "+t._s(t.dateFormat(t.effDate)))]),t.editing?a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"},{name:"focus",rawName:"v-focus"}],staticClass:"todo-item-input",attrs:{type:"text"},domProps:{value:t.title},on:{blur:t.doneEdit,keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doneEdit(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelEdit(e)}],input:function(e){e.target.composing||(t.title=e.target.value)}}}):t._e(),t.editing?t._e():a("span",{class:{important:t.important,completed:t.completed},attrs:{title:"Double click to edit"},on:{dblclick:t.editTodo,mouseover:t.unchoose}},[t._v("\n                "+t._s(t.textSegment(t.title))+"\n            ")])]),a("i",{staticClass:"todo-date"},[t._v("ExpDate: "+t._s(t.dateFormat(t.expDate)))]),a("i",{staticClass:"icon dark tooltip is-tooltip-left",attrs:{"data-tooltip":"Todo Details"},on:{click:t.openTodoDetails}},[a("fa",{attrs:{icon:"info-circle"}})],1),a("i",{staticClass:"icon dark tooltip is-tooltip-left",attrs:{"data-tooltip":"Remove"},on:{click:t.removeTodo}},[a("fa",{attrs:{icon:"trash-alt"}})],1)]),a("div",{staticClass:"todo-item-grab draggable",attrs:{title:"Drag to replace"}},[a("fa",{attrs:{icon:"arrows-alt"}})],1)])}),B=[],O=(a("28a5"),a("c5f6"),{name:"item",props:{todo:{type:Object,required:!0},index:{type:Number,required:!0},chosenTodoId:{type:String,required:!0},checkAll:{type:Boolean,required:!0}},data:function(){return{_id:this.todo._id,title:this.todo.title,completed:this.todo.completed,important:this.todo.important,editing:this.todo.editing,beforeEditCache:"",effDate:this.todo.date,expDate:this.todo.expDate}},watch:{checkAll:function(){this.completed=!!this.checkAll||this.todo.completed}},directives:{focus:{inserted:function(t){t.focus()}}},methods:{removeTodo:function(){this.$emit("removedTodo",this.todo._id)},editTodo:function(){this.beforeEditCache=this.title,this.editing=!0},dateFormat:function(t){var e=t.split(/[-|,|:|T|.|Z]/);return e[0]+"-"+e[1]+"-"+e[2]},doneEdit:function(){""==this.title&&(this.title=this.beforeEditCache),this.editing=!1;var t={_id:this.todo._id,title:this.title,important:this.important,editing:this.editing};this.$emit("finishedEdit",t)},setUnsetCompleted:function(){var t={_id:this.todo._id,completed:this.completed};this.$emit("setUnsetCompleted",t)},setUnsetImportant:function(){var t={_id:this.todo._id,important:this.important};this.$emit("setUnsetImportant",t)},cancelEdit:function(){this.title=this.beforeEditCache,this.editing=!1},unchoose:function(){this.$emit("unchosen")},textSegment:function(t){return t.length>=30?"".concat(t.substr(0,30),"..."):t},openTodoDetails:function(){ee.$emit("openTodoDetails",this.todo)}}}),D=O,N=Object(r["a"])(D,$,B,!1,null,null,null),q=N.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"todos-total"},[a("div",{staticClass:"todo-counts tooltip",attrs:{"data-tooltip":"Remaining todos"}},[t._v(t._s(t.remaining))]),a("div",{staticClass:"flex align-center"},[a("div",{staticClass:"filter-btn tooltip",class:{active:"all"===t.filter},attrs:{"data-tooltip":"Show All todos"},on:{click:function(e){return t.filterTodos("all")}}},[t._v("All")]),a("div",{staticClass:"filter-btn tooltip",class:{active:"active"===t.filter},attrs:{"data-tooltip":"Show Active todos"},on:{click:function(e){return t.filterTodos("active")}}},[t._v("Active")]),a("div",{staticClass:"filter-btn tooltip",class:{active:"completed"===t.filter},attrs:{"data-tooltip":"Show Compeleted todos"},on:{click:function(e){return t.filterTodos("completed")}}},[t._v("Completed")]),a("div",{staticClass:"filter-btn tooltip",class:{active:"important"===t.filter},attrs:{"data-tooltip":"Show Important todos"},on:{click:function(e){return t.filterTodos("important")}}},[t._v("Important")])]),t.isCompletedExists?a("i",{staticClass:"tooltip icon light",attrs:{"data-tooltip":"Delete completed"},on:{click:t.deleteCompleted}},[a("fa",{attrs:{icon:"trash-alt"}})],1):t._e()])},W=[],Q={name:"total",props:{anyRemaining:{type:Boolean,required:!0},remaining:{type:Number,required:!0},isCompletedExists:{type:Boolean,required:!0},filter:{type:String,required:!0}},methods:{filterTodos:function(t){this.$emit("filtered",t)},deleteCompleted:function(){var t=document.getElementById("deleteComp");t.style.animationName="slide-left",this.$emit("deleteAllCompleted")}}},H=Q,F=Object(r["a"])(H,j,W,!1,null,null,null),L=F.exports,Y=a("1516"),U=a.n(Y),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"todo-search relative"},[a("div",{staticClass:"input-checkbox tooltip is-tooltip-right",attrs:{"data-tooltip":"Mark all todos as done"}},[a("input",{attrs:{id:"allChecked",type:"checkbox"},domProps:{checked:!t.anyRemaining},on:{change:t.allChecked}}),a("label",{attrs:{for:"allChecked"}})]),a("div",{staticClass:"todo-search-field"},[a("fa",{attrs:{icon:"search"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Search todo (start typing...)"},domProps:{value:t.search},on:{keyup:[function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.filterTodos(e)},function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"escape",void 0,e.key,void 0))return null;t.search=""}],input:function(e){e.target.composing||(t.search=e.target.value)}}}),t.search?a("i",{staticClass:"animated fadeIn",on:{click:function(e){t.search=""}}},[a("fa",{attrs:{icon:"times"}})],1):t._e()],1),a("i",{staticClass:"tooltip icon dark",attrs:{"data-tooltip":"Share"},on:{click:function(e){t.shareMenu=!t.shareMenu}}},[a("fa",{attrs:{icon:"share-alt"}})],1),a("i",{staticClass:"tooltip icon dark",attrs:{"data-tooltip":"Add Todo"},on:{click:t.openAddTodoModal}},[a("fa",{attrs:{icon:"plus-circle"}})],1),t.shareMenu?a("div",{staticClass:"share-menu-wrapper"},[a("div",{staticClass:"backdrop-transparent",on:{click:function(e){t.shareMenu=!1}}}),a("div",{staticClass:"share-menu"},[a("div"),a("li",{on:{click:function(e){t.openWhatsapp,t.shareMenu=!1}}},[t._v("Send to WhatsApp")]),a("li",{on:{click:t.sendViaEmail}},[t._v("Send to Email")]),a("li",[a("excel",{attrs:{name:"todos.xls",data:t.todos,fields:t.todosFields},on:{click:function(e){t.shareMenu=!1}}},[t._v("Download as XLS")])],1)])]):t._e(),t.newTodoModal?a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"backdrop",on:{click:function(e){t.newTodoModal=!1}}}),a("new-todo-modal",{staticClass:"animated fadeInDown faster"})],1):t._e(),t.toWhatsapp?a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"backdrop",on:{click:function(e){t.toWhatsapp=!1}}}),a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-header"},[a("span",[t._v("Send via WhatsApp")]),a("i",{staticClass:"icon light",attrs:{title:"Close"},on:{click:function(e){t.toWhatsapp=!1}}},[a("fa",{attrs:{icon:"times"}})],1)]),a("div",{staticClass:"form-slim"},[a("div",{staticClass:"form-field"},[a("label",{staticStyle:{opacity:"1"}},[t._v("Input phone number (10 digits, without '8' or '+7')")]),a("fa",{attrs:{icon:["fab","whatsapp"]}}),a("masked-input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"input",attrs:{mask:"\\+7\\ (111) 111-11-11",placeholder:"Input phone number",required:""},on:{input:function(e){t.rawVal=arguments[1]}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),a("div",{staticClass:"form-controls"},[a("button",{staticClass:"btn cus-green standard",attrs:{disabled:t.rawVal.length<10}},[a("a",{attrs:{href:t.whatsAppApi}},[t._v("Send")])])])])])]):t._e(),t.message?a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"backdrop",on:{click:function(e){t.message=""}}}),a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-header"},[a("span",[t._v("MESSAGE")]),a("i",{staticClass:"icon light",attrs:{title:"Close"},on:{click:function(e){t.message=""}}},[a("fa",{attrs:{icon:"times"}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{class:t.status},[t._v(t._s(t.message))]),a("button",{staticClass:"btn cus-green std mt-5",on:{click:function(e){t.message=""}}},[t._v("ok")])])])]):t._e(),t.loading?a("div",{staticClass:"preloader"},[a("div",{staticClass:"animation animation-rotating-square"})]):t._e()])},z=[],V=(a("386d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-header"},[a("span",[t._v("New Todo")]),a("i",{staticClass:"icon light",attrs:{title:"Close"},on:{click:t.closeModal}},[a("fa",{attrs:{icon:"times"}})],1)]),a("form",{staticClass:"form-slim",on:{submit:function(e){return e.preventDefault(),t.validateBefore(e)}}},[a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"newtodo"}},[t._v("What needs to be done?")]),a("fa",{attrs:{icon:"list-ul"}}),a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.todo,expression:"todo"}],staticClass:"textarea",class:{"input-error":t.errors.has("newTodo")},attrs:{type:"text",autocomplete:"off",name:"newTodo",placeholder:"What needs to be done?"},domProps:{value:t.todo},on:{input:function(e){e.target.composing||(t.todo=e.target.value)}}})],1),a("span",{staticClass:"animated shake form-error"},[t._v(t._s(t.errors.first("newTodo")))]),a("div",{staticClass:"form-field"},[a("label",{attrs:{id:"dateTodo"}},[t._v("When needs to be done?")]),a("fa",{attrs:{icon:"calendar-alt"}}),a("date-picker",{staticClass:"input",attrs:{mode:"single","min-date":new Date,"popover-visibility":"focus"},model:{value:t.todoDate,callback:function(e){t.todoDate=e},expression:"todoDate"}})],1),a("div",{staticClass:"form-field relative"},[a("label",{attrs:{id:"todoPriority"}},[t._v("Priority of todo?")]),a("fa",{attrs:{icon:"exclamation-circle"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.todoPriority,expression:"todoPriority"}],staticClass:"input cursor-pointer",attrs:{type:"text",readonly:""},domProps:{value:t.todoPriority},on:{click:function(e){t.priorityMenu=!t.priorityMenu},input:function(e){e.target.composing||(t.todoPriority=e.target.value)}}}),t.priorityMenu?a("div",{staticClass:"dropdown"},[a("li",{on:{click:function(e){return t.choosePriority("High")}}},[t._v("High")]),a("li",{on:{click:function(e){return t.choosePriority("Normal")}}},[t._v("Normal")])]):t._e()],1),a("br"),a("div",{class:t.status},[t._v(t._s(t.message))]),a("div",{staticClass:"form-controls relative"},[a("button",{staticClass:"btn cus-green wide",staticStyle:{margin:"0"},attrs:{type:"submit",disabled:t.loading}},[t.loading?t._e():a("span",[a("fa",{attrs:{icon:"plus-circle"}}),t._v(" Add")],1),t.loading?a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")]):t._e()])])])])}),X=[],Z={name:"new-todo-modal",data:function(){return{message:"",status:"",todo:"",todoDate:new Date,loading:!1,priorityMenu:!1,todoPriority:"Normal"}},methods:{validateBefore:function(){var t=this;this.$validator.validateAll().then(function(e){e&&t.addTodo()})},addTodo:function(){var t=this;if(0!=this.todo.trim().length){var e={title:this.todo,priority:this.todoPriority,expDate:this.todoDate,user:this.$store.state.user._id,order:this.$store.state.todos.length+1};this.$http.post("/createTodo",e,{timeout:5e3,headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){ee.$emit("addTodo",e.data),t.closeModal()}).catch(function(e){"ECONABORTED"===e.code?(t.message="Server not response",t.status="error",setTimeout(function(){t.message="",t.status=""},3e3)):403==e.response.status?(t.message="Session expired",t.status="error",t.$store.dispatch("unsetSession"),t.$router.push("/")):(t.message="ERROR",t.status="error",setTimeout(function(){t.message="",t.status=""},3e3))})}},closeModal:function(){ee.$emit("closeNewTodoModal")},choosePriority:function(t){this.todoPriority=t,this.priorityMenu=!1}}},J=Z,K=Object(r["a"])(J,V,X,!1,null,null,null),tt=K.exports,et={dateTime:function(t){var e=t.split(/\T|\./);return"".concat(e[0],", ").concat(e[1])},date:function(t){var e=t.split(/\T|\./);return"".concat(e[0])},time:function(t){var e=t.split(/\T|\./);return"".concat(e[1])}},at=a("ab99"),st={name:"todo-search",components:{NewTodoModal:tt,MaskedInput:at["a"]},props:{anyRemaining:{type:Boolean,required:!0}},directives:{focus:{inserted:function(t){t.focus()}}},data:function(){return{todos:this.$store.state.todos,todosFields:{Todo:"title",Priority:"important",EffDate:{field:"date",callback:function(t){return et.dateTime(t)}},ExpDate:{field:"expDate",callback:function(t){return et.dateTime(t)}}},loading:!1,search:"",newTodoModal:!1,shareMenu:!1,toWhatsapp:!1,sendData:!0,message:"",status:"",phone:"",rawVal:""}},created:function(){var t=this;ee.$on("setTodos",function(e){t.todos=e}),ee.$on("closeNewTodoModal",function(){t.newTodoModal=!1})},computed:{whatsAppApi:function(){return"https://api.whatsapp.com/send?phone=7"+this.rawVal+"&text="+this.todoList},todoList:function(){for(var t="",e=0;e<this.$store.state.todos.length;e++)t+=e+1+") "+this.$store.state.todos[e].title+"; ";return t}},methods:{filterTodos:function(){ee.$emit("filterTodos",this.search)},openAddTodoModal:function(){this.newTodoModal=!0},openWhatsapp:function(){this.toWhatsapp=!0,this.shareMenu=!1},allChecked:function(){this.$emit("checkAllChanged",this.anyRemaining)},sendViaEmail:function(){var t=this,e=new Date,a=this.$store.state.todos.map(function(t,e){return"".concat(e+1,") ").concat(t.title)}),s={todos:a,currentDate:e.toLocaleDateString(),email:this.$store.state.user.email};this.loading=!0,this.shareMenu=!1,this.$http.post("/sendToEmail",s,{timeout:5e3,headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){t.message="SUCCESSFULLY SENT!",t.status="success"}).catch(function(e){t.message="SERVER ERROR!",t.status="error"}).then(function(){return t.loading=!1})}}},ot=st,it=Object(r["a"])(ot,G,z,!1,null,null,null),rt=it.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-header"},[a("span",[t._v("Todo Details")]),a("i",{staticClass:"icon light",attrs:{title:"Close"},on:{click:t.closeModal}},[a("fa",{attrs:{icon:"times"}})],1)]),a("div",{staticClass:"todo-detail"},[a("span",[t._v("Effective Date: "),a("strong",[t._v(t._s(t.dateHandler(t.todo.date)))])]),a("span",[t._v("Expire Date: "),a("strong",[t._v(t._s(t.dateHandler(t.todo.expDate)))])]),a("span",[t._v("Priority: "),a("strong",[t._v(t._s(t.priorityHandler(t.todo.important)))])]),a("span",[t._v("Todo: "),a("strong",[t._v(t._s(t.todo.title))])])])])},lt=[],dt={name:"todo-details",props:{todo:{type:Object}},methods:{closeModal:function(){ee.$emit("closeTodoDetails")},dateHandler:function(t){return et.dateTime(t)},priorityHandler:function(t){return t?"High":"Normal"}}},ct=dt,ut=Object(r["a"])(ct,nt,lt,!1,null,null,null),pt=ut.exports,mt={name:"todo",components:{Item:q,Total:L,Draggable:U.a,TodoSearch:rt,TodoDetails:pt},data:function(){return{todo:"",todos:[],beforeEditCache:"",filter:"all",error:"",authError:"",search:"",chosenTodoId:"",todoDetails:!1,todoDetail:"",loading:!1}},created:function(){var t=this;ee.$on("filterTodos",function(e){t.filter=e}),ee.$on("openTodoDetails",function(e){t.todoDetails=!0,t.todoDetail=e}),ee.$on("closeTodoDetails",function(){t.todoDetails=!1}),ee.$on("updateTodos",function(e){t.todosFiltered=e,t.$store.dispatch("setTodos",e)}),ee.$on("addTodo",function(e){t.todosFiltered.push(e),t.$store.dispatch("setTodos",t.todosFiltered)})},mounted:function(){this.getTodos()},computed:{loggedIn:function(){return this.$store.getters.loggedIn},year:function(){var t=new Date;return t.getFullYear()},remaining:function(){return this.todos.filter(function(t){return!t.completed}).length},anyRemaining:function(){return 0!=this.remaining},todosFiltered:{get:function(){var t=this;return"all"===this.filter?this.todos:"active"===this.filter?this.todos.filter(function(t){return!t.completed}):"completed"===this.filter?this.todos.filter(function(t){return t.completed}):"important"===this.filter?this.todos.filter(function(t){return t.important}):this.todos.filter(function(e){return e.title.toLowerCase().includes(t.filter.toLowerCase())})},set:function(t){this.todos=t}},isCompletedExists:function(){return this.todos.filter(function(t){return t.completed}).length>0}},methods:{getTodos:function(){var t=this;this.$store.getters.loggedIn&&(this.loading=!0,this.$http.get("/getTodos?userId=".concat(this.$store.state.user._id),{timeout:5e3,headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){t.todos=e.data.sort(function(t,e){return t.order-e.order}),t.$store.dispatch("setTodos",e.data)}).catch(function(e){console.log(e),"ECONNABORTED"===e.code&&(t.error="Server not response")}).then(function(){return t.loading=!1}))},navigateTo:function(t){this.$router.push(t)},setFilter:function(t){this.filter=t},removeTodo:function(t){var e=this;this.$http.delete("/deleteTodo?todoId=".concat(t),{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(a){e.todos=e.todos.filter(function(e){return e._id!==t}),e.error=""}).catch(function(t){403==t.response.status?(e.authError=t.response.data,e.$store.dispatch("unsetSession")):(e.error="ERROR",setTimeout(function(){e.error=""},3e3))})},setUnsetCompleted:function(t){var e=this;t._id,t.completed;this.$http.get("/setUnsetCompleted?_id=".concat(t._id,"&completed=").concat(t.completed),{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(a){console.log(a.data);var s=e.todos.findIndex(function(e){return e._id==t._id});e.todos.splice(s,1,a.data),e.error=""}).catch(function(t){403==t.response.status?(e.authError=t.response.data,e.$store.dispatch("unsetSession")):e.error="ERROR"})},setUnsetImportant:function(t){var e=this;this.$http.get("/setUnsetImportant?_id=".concat(t._id,"&important=").concat(t.important),{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(a){console.log(a.data);var s=e.todos.findIndex(function(e){return e._id==t._id});e.todos.splice(s,1,a.data),e.error=""}).catch(function(t){403==t.response.status?(e.authError=t.response.data,e.$store.dispatch("unsetSession")):e.error="ERROR"})},finishedEdit:function(t){var e=this,a={_id:t._id,title:t.title};this.$http.put("".concat(Api.host,"/api/editTodo"),a,{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(a){console.log(a.data);var s=e.todos.findIndex(function(e){return e._id==t._id});e.todos.splice(s,1,a.data),e.error=""}).catch(function(t){403==t.response.status?(e.authError=t.response.data,e.$store.dispatch("unsetSession")):e.error=t.response.data})},checkAllTodos:function(t){this.todos.forEach(function(t){return t.completed=event.target.checked})},deleteCompleted:function(){var t=this;this.$http.put("".concat(Api.host,"/api/deleteCompleted"),{todos:this.todos.filter(function(t){return t.completed})},{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){t.todos=t.todos.filter(function(t){return!t.completed}),t.error=""}).catch(function(e){403==e.response.status?(t.authError=e.response.data,t.$store.dispatch("unsetSession")):t.error=e.response.data})},showLabel:function(t){document.getElementById(t).style.opacity="1"},hideLabel:function(t){document.getElementById(t).style.opacity="0"},chooseTodo:function(t){this.chosenTodoId=t},unchooseTodo:function(){this.chosenTodoId=""},setOrder:function(){var t=this.todosFiltered.map(function(t,e){return{_id:t._id,order:e}});this.$http.post("/setOrder",{todos:t},{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(t){console.log(t.data)}).catch(function(t){console.log(t)})}}},ht=mt,ft=Object(r["a"])(ht,R,M,!1,null,null,null),vt=ft.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-title"},[t._v("Personal Planner")]),a("div",{staticClass:"header-item"},[a("i",{staticClass:"icon light",attrs:{title:"Authorization"},on:{click:function(e){t.authMenu=!t.authMenu}}},[t.authMenu?t._e():a("fa",{attrs:{icon:"user"}}),t.authMenu?a("fa",{attrs:{icon:"times"}}):t._e()],1),a("transition",{attrs:{name:"animations","enter-active-class":"animated slideInRight faster","leave-active-class":"animated slideOutRight faster"}},[t.authMenu?a("div",{staticClass:"header-dropdown"},[a("div",{staticClass:"header-dropdown-closer",attrs:{title:"Close"},on:{click:function(e){t.authMenu=!1}}},[a("fa",{attrs:{icon:"chevron-right"}})],1),a("div",{staticClass:"header-dropdown-content"},[a("div",[a("div",{staticClass:"header-dropdown-title"},[t._v("Hey, "+t._s(t.user))]),a("div",{staticClass:"header-dropdown-avatar"},[a("avatar")],1),t.error?a("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),a("ul",{staticClass:"header-dropdown-list"},[a("li",{on:{click:function(e){t.changePasswordMenu=!0,t.authMenu=!1}}},[a("fa",{attrs:{icon:"key"}}),t._v(" Change password")],1),a("li",{on:{click:t.logout}},[a("fa",{attrs:{icon:"sign-out-alt"}}),t._v(" Logout")],1)])]),a("div",{staticClass:"header-dropdown-footer"},[a("div",[a("a",{attrs:{href:"mailto: asset.sultan@gmail.com"}},[a("i",{staticClass:"tooltip icon light",attrs:{"data-tooltip":"Email me"}},[a("fa",{attrs:{icon:"envelope"}})],1)]),a("a",{attrs:{href:"https://github.com/Assenti",target:"_blank"}},[a("i",{staticClass:"icon light tooltip",attrs:{"data-tooltip":"I'm on Github"}},[a("fa",{attrs:{icon:["fab","github"]}})],1)]),a("a",{attrs:{href:"https://linkedin.com/in/asset-sultanov-developer/",target:"_blank"}},[a("i",{staticClass:"icon light tooltip",attrs:{"data-tooltip":"I'm on LinkedIn"}},[a("fa",{attrs:{icon:["fab","linkedin"]}})],1)])]),a("div",[t._v("Personal Planner by Asset Sultanov"),a("br"),t._v("© 2019")])])])]):t._e()])],1),t.changePasswordMenu?a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"backdrop",on:{click:function(e){t.changePasswordMenu=!1}}}),a("new-password-modal",{staticClass:"animated fadeInDown fast"})],1):t._e()])},Ct=[],bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"avatar"},[s("div",{on:{click:function(e){t.changing=!0}}},[t.$store.getters.avatar||t.changing?t._e():s("img",{staticClass:"fade-in",attrs:{src:a("f43c"),title:"Change avatar"}}),t.$store.getters.avatar&&!t.changing?s("img",{staticClass:"fade-in",attrs:{src:t.$store.getters.avatar,title:"Change avatar"}}):t._e(),t.changing?s("input",{ref:"file",attrs:{id:"file-input",type:"file",accept:"image/jpg, image/png, image/svg"},on:{change:t.selectFile}}):t._e(),t.changing&&!t.file?s("label",{staticClass:"fade-in",attrs:{for:"file-input",title:"Upload image"}},[s("fa",{attrs:{icon:"upload"}}),t._v("Choose image\n      ")],1):t._e(),t.changing&&t.file?s("label",{staticClass:"fade-in"},[s("fa",{attrs:{icon:"check-circle"}}),t._v(t._s(t.file.name))],1):t._e()]),s("div",[t.changing?s("i",{staticClass:"icon dark tooltip",attrs:{disabled:!t.file,"data-tooltip":"Change avatar"},on:{click:t.changeAvatar}},[s("fa",{attrs:{icon:"edit"}})],1):t._e(),t.changing?s("i",{staticClass:"icon dark tooltip",attrs:{"data-tooltip":"Delete avatar"},on:{click:t.deleteAvatar}},[s("fa",{attrs:{icon:"trash-alt"}})],1):t._e(),t.changing?s("i",{staticClass:"icon dark tooltip",attrs:{"data-tooltip":"Cancel"},on:{click:t.cancelUploading}},[s("fa",{attrs:{icon:"times"}})],1):t._e()])])},wt=[],_t=(a("df7c"),{name:"avatar",data:function(){return{changing:!1,file:"",avatar:"",setLoading:!1,deleteLoading:!1}},methods:{changeAvatar:function(){var t=this;if(this.file){var e=new FormData;e.append("userId",this.$store.state.user._id),e.append("file",this.file),this.$http.post("/setAvatar",e,{timeout:5e3,headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){t.$store.dispatch("setAvatar",e.data),t.changing=!1,t.file="",ee.$emit("error","")}).catch(function(t){console.log(t),"ECONNABORTED"===t.code?ee.$emit("error","Server not response"):ee.$emit("error","Server Error")})}else ee.$emit("error","Choose image")},selectFile:function(){this.file=this.$refs.file.files[0]},cancelUploading:function(){this.changing=!1,this.file=""},deleteAvatar:function(){var t=this;this.$http.get("/deleteAvatar?userId=".concat(this.$store.state.user._id,"&file=").concat(this.$store.state.user.avatar),{headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){t.$store.dispatch("setAvatar",e.data),t.changing=!1,ee.$emit("error","")}).catch(function(t){console.log(t),"ECONNABORTED"===t.code?ee.$emit("error","Server not response"):ee.$emit("error","Server Error")})}}}),kt=_t,yt=Object(r["a"])(kt,bt,wt,!1,null,null,null),Et=yt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-header"},[a("span",[t._v("Change Password")]),a("i",{staticClass:"icon light",attrs:{title:"Close"},on:{click:t.closeModal}},[a("fa",{attrs:{icon:"times"}})],1)]),a("form",{staticClass:"form-slim",on:{submit:function(e){return e.preventDefault(),t.validateBefore(e)}}},[a("div",{staticClass:"form-field relative"},[a("label",{attrs:{id:"todoPriority"}},[t._v("Current password")]),a("fa",{attrs:{icon:"key"}}),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.current,expression:"current"}],staticClass:"input",attrs:{name:"current",type:"text",autocomplete:"off"},domProps:{value:t.current},on:{input:[function(e){e.target.composing||(t.current=e.target.value)},function(e){t.message=t.status=""}]}})],1),t.errors.has("current")?a("span",{staticClass:"form-error"},[t._v("Input current password")]):t._e(),a("div",{staticClass:"form-field relative"},[a("label",{attrs:{id:"todoPriority"}},[t._v("New password")]),a("fa",{attrs:{icon:"key"}}),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.newPass,expression:"newPass"}],staticClass:"input",attrs:{type:"text",name:"newPassword",autocomplete:"off"},domProps:{value:t.newPass},on:{input:[function(e){e.target.composing||(t.newPass=e.target.value)},function(e){t.message=t.status=""}]}})],1),t.errors.has("newPassword")?a("span",{staticClass:"form-error"},[t._v("Input current password")]):t._e(),a("br"),a("div",{class:t.status},[t._v(t._s(t.message))]),a("div",{staticClass:"form-controls relative"},[a("button",{staticClass:"btn cus-green wide",staticStyle:{margin:"0"},attrs:{type:"submit",disabled:t.loading}},[t.loading?t._e():a("span",[t._v("Change")]),t.loading?a("div",{staticClass:"lds-facebook"},[a("div"),a("div"),a("div")]):t._e()])])])])},It=[],Tt={name:"new-password-modal",data:function(){return{message:"",status:"",current:"",newPass:"",loading:!1,messageTimeout:4e3}},methods:{validateBefore:function(){var t=this;this.$validator.validateAll().then(function(e){e?t.changePassword():(t.message="Fill in required fields",t.status="error")})},changePassword:function(){var t=this;this.loading=!0;var e={current:this.current,new:this.newPass,id:this.$store.state.user._id,email:this.$store.state.user.email};this.$http.post("/changePassword",e,{timeout:5e3,headers:{Authorization:"Bearer "+this.$store.state.token}}).then(function(e){t.message="Password successfully changed!",t.status="success",setTimeout(function(){t.message=t.status=""},messageTimeout)}).catch(function(e){401==e.response.status?(t.message="Wrong current password",t.status="error"):"ECONABORTED"===e.code?(t.message="Server not response",t.status="error",setTimeout(function(){t.message=t.status=""},messageTimeout)):(t.message="ERROR",t.status="error",setTimeout(function(){t.message=t.status=""},messageTimeout))}).then(function(){return t.loading=!1})},closeModal:function(){ee.$emit("closeNewPasswordModal")}}},Pt=Tt,St=Object(r["a"])(Pt,At,It,!1,null,null,null),xt=St.exports,Rt={name:"app-header",components:{Avatar:Et,NewPasswordModal:xt},data:function(){return{authMenu:!1,user:this.$store.state.user.firstname,error:"",changePasswordMenu:!1}},created:function(){var t=this;ee.$on("error",function(e){t.error=e}),ee.$on("closeNewPasswordModal",function(){return t.changePasswordMenu=!1})},methods:{logout:function(){var t=this;this.authMenu=!1,this.$http.get("/logout").then(function(t){console.log(t.data)}).catch(function(t){console.log(t)}).then(function(){t.$store.dispatch("unsetSession"),t.$router.push("/")})}}},Mt=Rt,$t=Object(r["a"])(Mt,gt,Ct,!1,null,null,null),Bt=$t.exports,Ot={name:"main-page",components:{Todo:vt,AppHeader:Bt}},Dt=Ot,Nt=Object(r["a"])(Dt,S,x,!1,null,null,null),qt=Nt.exports;s["a"].use(c["a"]);var jt=new c["a"]({mode:"history",base:"/",routes:[{path:"/",name:"auth",component:P,meta:{title:"Authorization | Personal Planner",requiresVisitors:!0}},{path:"/main",name:"main",component:qt,meta:{title:"Main | Personal Planner",requiresAuth:!0}}]}),Wt=a("f499"),Qt=a.n(Wt),Ht=a("2f62");s["a"].use(Ht["a"]);var Ft=new Ht["a"].Store({state:{user:JSON.parse(localStorage.getItem("user"))||null,todos:null},getters:{loggedIn:function(t){return null!==t.user},avatar:function(t){if(t.user)return t.user.avatar||null}},mutations:{setSession:function(t,e){t.user=e},setTodos:function(t,e){t.todos=e},setAvatar:function(t,e){t.user=e}},actions:{setSession:function(t,e){localStorage.setItem("user",Qt()(e)),t.commit("setSession",e)},unsetSession:function(t){localStorage.removeItem("user"),t.commit("setSession",null)},setTodos:function(t,e){t.commit("setTodos",e)},setAvatar:function(t,e){var a=JSON.parse(localStorage.getItem("user"));a.avatar=e,localStorage.setItem("user",Qt()(a)),t.commit("setAvatar",a)}}}),Lt=a("31bd"),Yt=a("7bb1"),Ut=(a("e96d"),a("77ed"),a("bc3a")),Gt=a.n(Ut),zt=(a("0ea4"),a("ecee")),Vt=a("c074"),Xt=a("f2d1"),Zt=a("ad3d"),Jt=a("da28"),Kt=(a("4418"),a("206f"),a("1bdd"));a.d(e,"bus",function(){return ee}),zt["c"].add(Xt["c"],Vt["v"],Vt["l"],Vt["g"],Xt["a"],Vt["e"],Vt["j"],Vt["o"],Vt["p"],Vt["s"],Vt["q"],Vt["b"],Vt["t"],Vt["c"],Vt["n"],Vt["i"],Vt["m"],Vt["h"],Vt["f"],Vt["a"],Vt["d"],Xt["b"],Vt["k"],Vt["u"],Vt["r"]),Object(Jt["setupCalendar"])({firstDayOfWeek:2});var te=Gt.a.create({baseURL:"/api"}),ee=new s["a"];s["a"].component("excel",Kt["a"]),s["a"].component("fa",Zt["a"]),s["a"].component("date-picker",Jt["DatePicker"]),s["a"].config.productionTip=!1,s["a"].use(Yt["a"]),s["a"].prototype.$http=te,Object(Lt["sync"])(Ft,jt),jt.beforeEach(function(t,e,a){document.title=t.meta.title,t.matched.some(function(t){return t.meta.requiresAuth})?Ft.getters.loggedIn||a({path:"/"}):t.matched.some(function(t){return t.meta.requiresVisitors})&&Ft.getters.loggedIn&&a({path:"/main"}),a()}),new s["a"]({router:jt,store:Ft,render:function(t){return t(d)}}).$mount("#app")},e96d:function(t,e,a){},f43c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACldJREFUeNrs3Wtv03YbwGEoZRyebRLivA22aYhNQki82vf/Apu2Fdi6lh62MppTW0jTloYkz/20kpenFJo4dg72db1AiIMLrn+9/3Yd53yv1zsHTM55EYIIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhMBsRLi1tbW6umpfM4vu379/8+bNXD/E/Bj+G+12u9ls+nQyi+LozftDzNnLMFkiBBGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERggiBnM1P+b9vbm7uzp07Pk+MolKpdDodEaaP8OHDhw4jRrG1tTXNEVqOgghBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYSACEGEgAhBhIAIQYRARubtgkEcHBy02+0LFy5cvXrV3kCE49Dr9ba3txuNRr1ef/v27f/tsvn5a9eu3bp1K36Mn9tXiDB7r169WltbO9Fe4t27d7UjMRjvHYmf2GmIMButVuv58+fx4yB/uNPpRKv//PPP999/f/36dXuPdFyY+VcsPn/++ecBC0wcHh4uLCz89ddfdiAiHEmlUomWUr+p8srKytLSkt2ICFN68+bN4uLiiBt5+fJlLE3tTEQ4tHa7/fTp0263O/qmlpeXo2e7FBEOJ07n4rwuk01FyS9evCjPrsvkKxdlj/Dg4CCWkRlu8PXr1/V6vSR7L86Em82mikQ4kjiLy/zL+d9//12GXbezsxNfv169eqUiEY6kWq1mvs04LYzzzGLvt06ns7i42Ov1KpVK6kvKiPB/35qP5Wjmm41Ds1arFXvXra6u7u/vH9cYHQpJhOnP33LacrHPlGK/9Z9IW5GKML08xuCx4ylRSHEK/ccff8S07/+K4xszIkzp3bt3OW25wOeEyUK0n2EoQsYkJt7Gxsb7vx6nhfl9RRNhkeX3EqSLFy+WYSHa/1suz4gwjStXruS05UuXLhVyIbq3t/eh33XfrAjT+PTTT3Pa8meffVaShWii1Wrld7VZhIUVqeS0brx27VpJFqKGoQhHcv78+Rs3bmS+2f8cKc9CNFGr1Qp/q5AIs/fVV19Fitlu8/79+6VaiPYPTJdnRJhmat29ezfb88xbt24VaSF6fI/ogH/eilSEaXz99ddZPbkwhup3332X+Wid7EJ0qIfuxKp1Z2fHQSXC4Vy6dOnRo0eZlPPtt98W6ZLM4AvRfu6eEWEaUc6DBw9G3Mjt27eLdDY47EI04fKMCFP68ssvf/jhh7m5lDvk3r178deLtEPW19eHffpjUu/m5qYjSoRp3Llz58mTJ5cvXx7qb8X5ZORXsFPBZrM5ypNUXZ4Z7hCyC/p9/vnnP/7448uXL2MOnHlHcozNu3fvfvPNNwW7U3TAb81/xP7+/vb2dsHuWBDhGNcGc3Oxtoy64jCqVqvx44kaY+LF4XX9+vUbN24U8h7R1AvRE8NQhCIcbb/Mz988cu7oCQ7J/SJR3SeffFLg//iIC9FEo9E4PDws9r4S4fhcuHCheDdk57QQ7d/U5uZmwW4eymvxZRdMp93d3fE/Wjdm4OgL0f4VaSY9i5AJiAXw0yPj7DCyz/a9pQ4ODuKM2mdThDNpfX09juCtra1nz56Np8PjhWjmH8v3KkQ4qwvR5GaxRqMxng5jBsbHzXyz8e//0BseI8LptbS01F9dHMfPnz/PtcPMF6KJOCd0K6kIZ0ys395/SES9Xs+vw5wWoomI0OUZEc6Mdru9urp66m/l12FOC9FELEfj5NYnV4SzYXl5+SOvP8ijw1arldNC9MR498kV4QyIVeiZz4aIDn///fesOoxVYq4L0URMwvzecUCEZHZitri4OMifrNVq0WEmZ1kxA8fzxjXxr/XiJhFOu42NjUEeZ5Z0GOvSETuMhej6+vrY/oPunhHhVNvf319bWxvqr4w4D8e2EE0cHh42Gg2faxFOqeXl5RQ9VKvV1B2ObSHar/8tDRHhFKlUKqlHRHSY4kUPY16IJnZ2dgr8to0inFWdTmdlZWXEhofqMP7k4uLi+F+fcc7dMyKcTi9evBj91sqhOtzY2Jjgu+pubm5OpH8Rcrrd3d2sJkN0OMjjCff29j50R854uDwjwilyfH0yw6v2MWQ+/p3G8V8RPZW7Z0Q4LWIGZn7HZnQYmU3nQjSxvb3t8owIJy/OA+NsMKeTrlPn4cQXooahCNPLY/22srLS6XTym7EnOpyShWj/VwqXZ0Q4xNop8we9NBqNvN/E70SHU7IQTbTb7Vqt5ugS4UBiCbe1tbWwsJBVh7Gd5eXl8Zxz/vnnn+eO7ombnoWoFempPHf0Y2PweIDET6LDx48fp367mMTa2trYLkscH+gTeXTimV6/fh2nqVevXnWYmYRnjMH+IH/77bcRj+Y47FK83d+IHU7VQtQwFGGaMZjY2dn59ddfR7mgMqn7xaZTnBjbGyIcdAz2L6JiHqbrMI6595/gVGbtdrtardoPIhx0DPZ3GPPwzHdNe/+AG8/1mNliRSrC4cZgIvqMeThUh7FB7yB96p7M8K0vRFiKMdh/9Aw+D2N4+pL/IV7pK8Khx2Ci2WxGh2fOt263u7S0ZK9+SJwW5nfzkAgLOwaH6nBjYyPXR+vOulhNuDwjwjRjMBGBfaTDg4ODiTxIYrZ4ub0IU47B/g5/+eWXUzuMhai11plin4//qVMiLMgYTLRarejw8PCw/xfr9bpXkRuGIsx9DPZ3GOvSpMMYgK7HDK5SqZR5ySDCUcfgiXl4/OCmtbU1b445uCgw75d3ibDgYzCxt7cX8zBWoWO+UbsAyvytVBFmMwb7O1xYWPC+C8Pa3d2d2hd8iHBmxiCGoQgnPwYZRbVaHfbOeBEag2Sp2+2W8/JM2SM0Bq1IRWgM8q9Wq1XClz6XOkJj0DAUoTHISbVarWwvgC5vhMbgdOp2u5ubmyI0Bpmkst3PXdIIjcFptre3F18lRWgMMkmlWpGWMUJjcPqV6vJM6SI0BmdCqS7PlC5CY3BWlOcbhuWK0BicIfv7+yW5PFOuCI1Bw1CExiBDqNfrJx6fJUJjkLHq9Xpl+MZ9WSI0BmdURFj4Z4WU5e2y4yz/iy++cEzPordv316+fFmEM0+BWI4CIgQRAiIEEQIiBBECIgQRAiIEEQIiBBGCCAERgggBEYIIgYmY9sdb9Hq9ZrPp88Qout2uCNPrdDo//fSTwwjLUUCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCQIQgQkCEIEJAhCBCECEgQhAhIEIQISBCECEgQhAhIEIQISBCECEgQhAhIEIQISBCECEgQhAhIEIQIZCx871ez14AEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARGCCAERgggBEYIIARHC7PqvAAMA/BkrMLAeft8AAAAASUVORK5CYII="}});
//# sourceMappingURL=app.ed7fd04a.js.map